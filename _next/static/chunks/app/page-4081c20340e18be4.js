(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9629:(e,t,s)=>{Promise.resolve().then(s.bind(s,2617))},2617:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>e0});var a=s(4001),r=s(7749),n=s(8864),d=s(8069),i=s(3549),l=s(2184);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,i.$)(t))}function c(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"UAH"}).format(e)}function m(e){let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}function u(e){let t=new Date;t.setHours(0,0,0,0);let s=new Date(e);return s.setHours(0,0,0,0),s<t}let x=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,t)=>{let{className:s,variant:r,size:d,asChild:i=!1,...l}=e,c=i?n.DX:"button";return(0,a.jsx)(c,{className:o(x({variant:r,size:d,className:s})),ref:t,...l})});h.displayName="Button";let p=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});p.displayName="Input";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});f.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("p-6 pt-0",s),...r})});g.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";let j=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function b(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:o(j({variant:s}),t),...r})}var v=s(8332),N=s(2807),w=s(2786),y=s(4803),k=s(2324),z=s(9098),C=s(5098);let R=C.bL,D=C.l9,A=C.ZL,S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.hJ,{className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});S.displayName=C.hJ.displayName;let O=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(A,{children:[(0,a.jsx)(S,{}),(0,a.jsx)(C.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});O.displayName=C.UC.displayName;let T=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",t),...s})};T.displayName="AlertDialogHeader";let I=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};I.displayName="AlertDialogFooter";let F=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.hE,{ref:t,className:o("text-lg font-semibold",s),...r})});F.displayName=C.hE.displayName;let U=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.VY,{ref:t,className:o("text-sm text-muted-foreground",s),...r})});U.displayName=C.VY.displayName;let E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.rc,{ref:t,className:o(x(),s),...r})});E.displayName=C.rc.displayName;let B=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.ZD,{ref:t,className:o(x({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});B.displayName=C.ZD.displayName;var P=s(3457),L=s(1106);let J=P.bL,V=P.l9,_=P.ZL;P.bm;let Y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(P.hJ,{ref:t,className:o("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});Y.displayName=P.hJ.displayName;let M=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(_,{children:[(0,a.jsx)(Y,{}),(0,a.jsxs)(P.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,a.jsxs)(P.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(L.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});M.displayName=P.UC.displayName;let Z=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};Z.displayName="DialogHeader";let H=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};H.displayName="DialogFooter";let q=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(P.hE,{ref:t,className:o("text-lg font-semibold leading-none tracking-tight",s),...r})});q.displayName=P.hE.displayName;let K=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(P.VY,{ref:t,className:o("text-sm text-muted-foreground",s),...r})});K.displayName=P.VY.displayName;var G=s(5708);let W=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Q=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(G.b,{ref:t,className:o(W(),s),...r})});function X(e){let{people:t,setPeople:s,debts:n,onAddDebt:d}=e,[i,l]=(0,r.useState)(""),[o,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[j,C]=(0,r.useState)(""),D=()=>{""!==i.trim()&&(s([...t,{id:crypto.randomUUID(),name:i.trim()}]),l(""))},A=e=>{n.some(t=>t.personId===e.id)?m(e):s(t.filter(t=>t.id!==e.id))},S=e=>{x(e),C(e.name)},P=()=>{u&&""!==j.trim()&&(s(t.map(e=>e.id===u.id?{...e,name:j.trim()}:e)),x(null),C(""))},L=e=>{let t=n.filter(t=>t.personId===e),s=t.filter(e=>"given"===e.status),a=t.filter(e=>"payed back"===e.status),r=t.filter(e=>"borrowed"===e.status),d=t.filter(e=>"returned"===e.status),i=s.reduce((e,t)=>e+t.amount,0),l=a.reduce((e,t)=>e+t.amount,0),o=r.reduce((e,t)=>e+t.amount,0),c=d.reduce((e,t)=>e+t.amount,0);return{totalDebts:t.length,outstandingCount:s.length,paidCount:a.length,borrowedCount:r.length,returnedCount:d.length,totalOutstanding:i,totalPaid:l,totalBorrowed:o,totalReturned:c}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"People"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(p,{placeholder:"Enter person's name",value:i,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D()}}),(0,a.jsxs)(h,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white",onClick:D,children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"New Person"]})]})]}),t.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{let t=L(e.id),s=t.totalOutstanding-t.totalBorrowed,r=t.totalDebts>0;return(0,a.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-zinc-900 to-zinc-950 dark:from-zinc-900 dark:to-zinc-950 p-4 border-b",children:(0,a.jsxs)("div",{className:"flex justify-between items-start flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,a.jsx)(h,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full",onClick:()=>S(e),children:(0,a.jsx)(N.A,{className:"h-3.5 w-3.5"})})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"relative group",children:(0,a.jsxs)(h,{variant:"outline",size:"sm",className:"h-7 px-2.5 text-xs bg-white dark:bg-zinc-800 hover:bg-violet-50 dark:hover:bg-zinc-700",onClick:()=>d(e.id,!1),children:[(0,a.jsx)(w.A,{className:"h-3 w-3 mr-1.5 text-green-600"}),"They owe"]})}),(0,a.jsx)("div",{className:"relative group",children:(0,a.jsxs)(h,{variant:"outline",size:"sm",className:"h-7 px-2.5 text-xs bg-white dark:bg-zinc-800 hover:bg-red-50 dark:hover:bg-zinc-700",onClick:()=>d(e.id,!0),children:[(0,a.jsx)(w.A,{className:"h-3 w-3 mr-1.5 text-red-500"}),"You owe"]})}),(0,a.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-red-100 dark:hover:bg-red-900 hover:text-red-600 transition-colors",onClick:()=>A(e),children:(0,a.jsx)(y.A,{className:"h-3.5 w-3.5"})})]})]})}),(0,a.jsx)(g,{className:"p-4",children:r?(0,a.jsxs)("div",{className:"space-y-4",children:[(t.outstandingCount>0||t.paidCount>0)&&(0,a.jsxs)("div",{className:"space-y-2.5 bg-green-50 dark:bg-green-950/30 rounded-lg p-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-green-500"}),"They owe you:"]}),t.outstandingCount>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(b,{variant:"default",className:"h-5 bg-green-500 hover:bg-green-600",children:t.outstandingCount}),(0,a.jsx)("span",{className:"text-sm",children:"Outstanding"})]}),(0,a.jsx)("span",{className:"font-medium text-green-700 dark:text-green-400",children:c(t.totalOutstanding)})]}),t.paidCount>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(b,{variant:"outline",className:"h-5 border-green-300 text-green-700 dark:border-green-700 dark:text-green-400",children:t.paidCount}),(0,a.jsx)("span",{className:"text-sm",children:"Paid back"})]}),(0,a.jsx)("span",{className:"font-medium text-muted-foreground",children:c(t.totalPaid)})]})]}),(t.borrowedCount>0||t.returnedCount>0)&&(0,a.jsxs)("div",{className:"space-y-2.5 bg-red-50 dark:bg-red-950/30 rounded-lg p-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-500"}),"You owe them:"]}),t.borrowedCount>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(b,{variant:"destructive",className:"h-5",children:t.borrowedCount}),(0,a.jsx)("span",{className:"text-sm",children:"Outstanding"})]}),(0,a.jsx)("span",{className:"font-medium text-red-700 dark:text-red-400",children:c(t.totalBorrowed)})]}),t.returnedCount>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(b,{variant:"outline",className:"h-5 border-red-300 text-red-700 dark:border-red-700 dark:text-red-400",children:t.returnedCount}),(0,a.jsx)("span",{className:"text-sm",children:"Returned"})]}),(0,a.jsx)("span",{className:"font-medium text-muted-foreground",children:c(t.totalReturned)})]})]}),(0,a.jsx)("div",{className:"pt-3 mt-2 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Net balance:"}),(0,a.jsx)("span",{className:"font-bold text-lg ".concat(s>0?"text-green-600 dark:text-green-400":s<0?"text-red-600 dark:text-red-400":""),children:c(s)})]})})]}):(0,a.jsxs)("div",{className:"text-center py-6 text-muted-foreground flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-3",children:(0,a.jsx)(k.A,{className:"h-6 w-6 text-zinc-400"})}),(0,a.jsx)("p",{className:"text-sm",children:"No debts recorded"})]})})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12 px-4 text-muted-foreground bg-zinc-50 dark:bg-zinc-900 rounded-lg",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:(0,a.jsx)(z.A,{className:"h-8 w-8 text-zinc-400"})}),(0,a.jsx)("p",{className:"text-lg mb-2",children:"No people added yet"}),(0,a.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Add someone to get started tracking debts"})]}),(0,a.jsx)(R,{open:!!o,onOpenChange:()=>m(null),children:(0,a.jsxs)(O,{children:[(0,a.jsxs)(T,{children:[(0,a.jsx)(F,{children:"Are you sure?"}),(0,a.jsx)(U,{children:"This person has debts associated with them. Deleting them will remove all their debt records as well."})]}),(0,a.jsxs)(I,{children:[(0,a.jsx)(B,{children:"Cancel"}),(0,a.jsx)(E,{onClick:()=>{o&&(s(t.filter(e=>e.id!==o.id)),m(null))},children:"Delete"})]})]})}),(0,a.jsx)(J,{open:!!u,onOpenChange:e=>{e||x(null)},children:(0,a.jsxs)(M,{children:[(0,a.jsxs)(Z,{children:[(0,a.jsx)(q,{children:"Edit Person"}),(0,a.jsx)(K,{children:"Update the person's name below."})]}),(0,a.jsx)("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"name",children:"Name"}),(0,a.jsx)(p,{id:"name",value:j,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&P()}})]})}),(0,a.jsx)(H,{children:(0,a.jsx)(h,{onClick:P,children:"Save Changes"})})]})})]})}Q.displayName=G.b.displayName;let $=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});$.displayName="Textarea";var ee=s(9236),et=s(1792),es=s(6745),ea=s(8602);let er=ee.bL;ee.YJ;let en=ee.WT,ed=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(ee.l9,{ref:t,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,(0,a.jsx)(ee.In,{asChild:!0,children:(0,a.jsx)(et.A,{className:"h-4 w-4 opacity-50"})})]})});ed.displayName=ee.l9.displayName;let ei=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ee.PP,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(es.A,{className:"h-4 w-4"})})});ei.displayName=ee.PP.displayName;let el=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ee.wn,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(et.A,{className:"h-4 w-4"})})});el.displayName=ee.wn.displayName;let eo=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...d}=e;return(0,a.jsx)(ee.ZL,{children:(0,a.jsxs)(ee.UC,{ref:t,className:o("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...d,children:[(0,a.jsx)(ei,{}),(0,a.jsx)(ee.LM,{className:o("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(el,{})]})})});eo.displayName=ee.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ee.JU,{ref:t,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=ee.JU.displayName;let ec=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(ee.q7,{ref:t,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ee.VF,{children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})}),(0,a.jsx)(ee.p4,{children:r})]})});ec.displayName=ee.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ee.wv,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=ee.wv.displayName;var em=s(7511),eu=s(9442),ex=s(5636),eh=s(3088),ep=s(2625),ef=s(6684),eg=s(6900),ej=s(4610);let eb=ej.bL,ev=ej.l9,eN=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:n=4,...d}=e;return(0,a.jsx)(ej.ZL,{children:(0,a.jsx)(ej.UC,{ref:t,align:r,sideOffset:n,className:o("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...d})})});eN.displayName=ej.UC.displayName;var ew=s(8344),ey=s(3026),ek=s(9072);let ez=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ek.bL,{className:o("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(ek.zi,{className:o("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});function eC(e){let{people:t,filters:s,setFilters:n,sorting:d,setSorting:i,overdueCount:l}=e,[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),x=()=>{n({personId:"",status:"",minAmount:"",maxAmount:"",type:"",overdue:!1})},f=s.personId||s.status||s.minAmount||s.maxAmount||s.type||s.overdue;return(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(eb,{open:o,onOpenChange:c,children:[(0,a.jsx)(ev,{asChild:!0,children:(0,a.jsxs)(h,{variant:"outline",className:"flex items-center gap-2","aria-expanded":o,children:[(0,a.jsx)(ew.A,{className:"h-4 w-4"}),"Filter",f&&(0,a.jsx)("span",{className:"ml-1 rounded-full bg-primary w-2 h-2"}),s.overdue&&(0,a.jsxs)(b,{variant:"outline",className:"ml-1 px-1 py-0 h-5 text-xs border-red-500 text-red-500",children:[(0,a.jsx)(ep.A,{className:"h-3 w-3 mr-1"}),"Overdue"]})]})}),(0,a.jsx)(eN,{className:"w-80",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium leading-none",children:"Filters"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Filter transactions by various criteria"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)(Q,{htmlFor:"filter-type",children:"Transaction Type"}),(0,a.jsxs)(er,{value:s.type,onValueChange:e=>n({...s,type:e}),children:[(0,a.jsx)(ed,{id:"filter-type",children:(0,a.jsx)(en,{placeholder:"All types"})}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(ec,{value:"all_types",children:"All types"}),(0,a.jsx)(ec,{value:"they-owe",children:"They owe you"}),(0,a.jsx)(ec,{value:"you-owe",children:"You owe them"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)(Q,{htmlFor:"filter-person",children:"Person"}),(0,a.jsxs)(er,{value:s.personId,onValueChange:e=>n({...s,personId:e}),children:[(0,a.jsx)(ed,{id:"filter-person",children:(0,a.jsx)(en,{placeholder:"All people"})}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(ec,{value:"all_people",children:"All people"}),t.map(e=>(0,a.jsx)(ec,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)(Q,{htmlFor:"filter-status",children:"Status"}),(0,a.jsxs)(er,{value:s.status,onValueChange:e=>n({...s,status:e}),children:[(0,a.jsx)(ed,{id:"filter-status",children:(0,a.jsx)(en,{placeholder:"All statuses"})}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(ec,{value:"all_statuses",children:"All statuses"}),(0,a.jsx)(ec,{value:"given",children:"They Owe - Outstanding"}),(0,a.jsx)(ec,{value:"payed back",children:"They Owe - Paid Back"}),(0,a.jsx)(ec,{value:"borrowed",children:"You Owe - Outstanding"}),(0,a.jsx)(ec,{value:"returned",children:"You Owe - Returned"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)(Q,{htmlFor:"min-amount",children:"Min Amount"}),(0,a.jsx)(p,{id:"min-amount",type:"number",min:"0",step:"0.01",placeholder:"Min",value:s.minAmount,onChange:e=>n({...s,minAmount:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)(Q,{htmlFor:"max-amount",children:"Max Amount"}),(0,a.jsx)(p,{id:"max-amount",type:"number",min:"0",step:"0.01",placeholder:"Max",value:s.maxAmount,onChange:e=>n({...s,maxAmount:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ez,{id:"overdue-filter",checked:s.overdue,onCheckedChange:e=>n({...s,overdue:e})}),(0,a.jsxs)(Q,{htmlFor:"overdue-filter",className:"flex items-center",children:[(0,a.jsx)("span",{children:"Show overdue only"}),l>0&&(0,a.jsx)(b,{variant:"outline",className:"ml-2 px-1 py-0 h-5 text-xs border-red-500 text-red-500",children:l})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(h,{variant:"outline",size:"sm",onClick:x,disabled:!f,children:"Reset"}),(0,a.jsx)(h,{size:"sm",onClick:()=>c(!1),children:"Apply"})]})]})})]}),(0,a.jsxs)(eb,{open:m,onOpenChange:u,children:[(0,a.jsx)(ev,{asChild:!0,children:(0,a.jsxs)(h,{variant:"outline",className:"flex items-center gap-2","aria-expanded":m,children:[(0,a.jsx)(ey.A,{className:"h-4 w-4"}),"Sort"]})}),(0,a.jsx)(eN,{className:"w-72",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium leading-none",children:"Sort"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sort transactions by various criteria"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)(Q,{htmlFor:"sort-field",children:"Sort By"}),(0,a.jsxs)(er,{value:d.field,onValueChange:e=>i({...d,field:e}),children:[(0,a.jsx)(ed,{id:"sort-field",children:(0,a.jsx)(en,{placeholder:"Select field"})}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(ec,{value:"date",children:"Transaction Date"}),(0,a.jsx)(ec,{value:"dueDate",children:"Due Date"}),(0,a.jsx)(ec,{value:"amount",children:"Amount"}),(0,a.jsx)(ec,{value:"personName",children:"Person Name"}),(0,a.jsx)(ec,{value:"status",children:"Status"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)(Q,{htmlFor:"sort-direction",children:"Direction"}),(0,a.jsxs)(er,{value:d.direction,onValueChange:e=>i({...d,direction:e}),children:[(0,a.jsx)(ed,{id:"sort-direction",children:(0,a.jsx)(en,{placeholder:"Select direction"})}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(ec,{value:"asc",children:"Ascending"}),(0,a.jsx)(ec,{value:"desc",children:"Descending"})]})]})]})]}),(0,a.jsx)(h,{size:"sm",onClick:()=>u(!1),children:"Apply"})]})})]})]}),f&&(0,a.jsxs)(h,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:x,children:[(0,a.jsx)(L.A,{className:"h-3 w-3 mr-1"}),"Clear filters"]})]})}ez.displayName=ek.bL.displayName;var eR=s(3750);let eD=eR.bL,eA=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eR.B8,{ref:t,className:o("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});eA.displayName=eR.B8.displayName;let eS=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eR.l9,{ref:t,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});eS.displayName=eR.l9.displayName;let eO=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eR.UC,{ref:t,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});eO.displayName=eR.UC.displayName;var eT=s(5018);let eI=eT.Kq,eF=eT.bL,eU=eT.l9,eE=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(eT.UC,{ref:t,sideOffset:r,className:o("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...n})});eE.displayName=eT.UC.displayName;var eB=s(6958);let eP=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eB.bL,{ref:t,className:o("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(eB.C1,{className:o("flex items-center justify-center text-current"),children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})})});eP.displayName=eB.bL.displayName;let eL=(0,r.forwardRef)((e,t)=>{let{people:s,debts:n,setDebts:d}=e,[i,l]=(0,r.useState)(!1),[o,x]=(0,r.useState)(null),[j,v]=(0,r.useState)({personId:"",amount:"",description:"",date:new Date().toISOString().split("T")[0],expectedReturnDate:"",includeExpectedDate:!1,status:"given"}),[z,C]=(0,r.useState)("they-owe");(0,r.useImperativeHandle)(t,()=>({initFormForPerson:(e,t)=>{v({personId:e,amount:"",description:"",date:new Date().toISOString().split("T")[0],expectedReturnDate:"",includeExpectedDate:!1,status:t?"borrowed":"given"}),C(t?"you-owe":"they-owe"),l(!0)}}));let[A,S]=(0,r.useState)({personId:"",status:"",minAmount:"",maxAmount:"",type:"",overdue:!1}),[P,_]=(0,r.useState)({field:"date",direction:"desc"}),Y=()=>{v({personId:"",amount:"",description:"",date:new Date().toISOString().split("T")[0],expectedReturnDate:"",includeExpectedDate:!1,status:"given"}),C("they-owe"),x(null)},G=e=>{d(n.filter(t=>t.id!==e))},W=e=>{d(n.map(t=>{if(t.id===e){let e;return e="given"===t.status?"payed back":"payed back"===t.status?"given":"borrowed"===t.status?"returned":"borrowed",{...t,status:e}}return t}))},X=e=>{x(e),v({personId:e.personId,amount:e.amount.toString(),description:e.description,date:e.date,expectedReturnDate:e.expectedReturnDate||"",includeExpectedDate:!!e.expectedReturnDate,status:e.status}),"given"===e.status||"payed back"===e.status?C("they-owe"):C("you-owe"),l(!0)},ee=(0,r.useMemo)(()=>{let e=n.filter(e=>!(A.personId&&e.personId!==A.personId||A.status&&e.status!==A.status||"they-owe"===A.type&&("borrowed"===e.status||"returned"===e.status)||"you-owe"===A.type&&("given"===e.status||"payed back"===e.status)||A.overdue&&(!("given"===e.status||"borrowed"===e.status)||!e.expectedReturnDate||!u(e.expectedReturnDate))||A.minAmount&&e.amount<Number.parseFloat(A.minAmount)||A.maxAmount&&e.amount>Number.parseFloat(A.maxAmount)));return e.sort((e,t)=>{if("personName"===P.field){var a,r;let n=(null===(a=s.find(t=>t.id===e.personId))||void 0===a?void 0:a.name)||"",d=(null===(r=s.find(e=>e.id===t.personId))||void 0===r?void 0:r.name)||"";return"asc"===P.direction?n.localeCompare(d):d.localeCompare(n)}return"date"===P.field?"asc"===P.direction?new Date(e.date).getTime()-new Date(t.date).getTime():new Date(t.date).getTime()-new Date(e.date).getTime():"dueDate"===P.field?e.expectedReturnDate||t.expectedReturnDate?e.expectedReturnDate?t.expectedReturnDate?"asc"===P.direction?new Date(e.expectedReturnDate).getTime()-new Date(t.expectedReturnDate).getTime():new Date(t.expectedReturnDate).getTime()-new Date(e.expectedReturnDate).getTime():"asc"===P.direction?-1:1:"asc"===P.direction?1:-1:0:"amount"===P.field?"asc"===P.direction?e.amount-t.amount:t.amount-e.amount:0}),e},[n,A,P,s]),et=(0,r.useMemo)(()=>{let e=n.filter(e=>"given"===e.status),t=n.filter(e=>"payed back"===e.status),s=n.filter(e=>"borrowed"===e.status),a=n.filter(e=>"returned"===e.status),r=n.filter(e=>("given"===e.status||"borrowed"===e.status)&&e.expectedReturnDate&&u(e.expectedReturnDate)),d=e.reduce((e,t)=>e+t.amount,0),i=s.reduce((e,t)=>e+t.amount,0);return{givenCount:e.length,paidBackCount:t.length,borrowedCount:s.length,returnedCount:a.length,overdueCount:r.length,totalOutstanding:d,totalOwed:i,netBalance:d-i}},[n]);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Transactions"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(D,{asChild:!0,children:(0,a.jsx)(h,{variant:"outline",disabled:!n.some(e=>"payed back"===e.status||"returned"===e.status),children:"Remove All Settled"})}),(0,a.jsxs)(O,{children:[(0,a.jsxs)(T,{children:[(0,a.jsx)(F,{children:"Are you sure?"}),(0,a.jsx)(U,{children:'This will remove all debts with "Paid Back" or "Returned" status. This action cannot be undone.'})]}),(0,a.jsxs)(I,{children:[(0,a.jsx)(B,{children:"Cancel"}),(0,a.jsx)(E,{onClick:()=>{d(n.filter(e=>"payed back"!==e.status&&"returned"!==e.status))},children:"Remove All"})]})]})]}),(0,a.jsxs)(J,{open:i,onOpenChange:l,children:[(0,a.jsx)(V,{asChild:!0,children:(0,a.jsxs)(h,{disabled:0===s.length,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})}),(0,a.jsxs)(M,{children:[(0,a.jsxs)(Z,{children:[(0,a.jsx)(q,{children:o?"Edit Transaction":"Add New Transaction"}),(0,a.jsx)(K,{children:o?"Update the transaction details below.":"Enter the details of the transaction below."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)(eD,{value:z,onValueChange:e=>{C(e),"they-owe"===e?v({...j,status:(null==o?void 0:o.status)==="payed back"?"payed back":"given"}):v({...j,status:(null==o?void 0:o.status)==="returned"?"returned":"borrowed"})},className:"w-full",children:(0,a.jsxs)(eA,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(eS,{value:"they-owe",children:"They Owe You"}),(0,a.jsx)(eS,{value:"you-owe",children:"You Owe Them"})]})}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"person",children:"Person"}),(0,a.jsxs)(er,{value:j.personId,onValueChange:e=>v({...j,personId:e}),children:[(0,a.jsx)(ed,{children:(0,a.jsx)(en,{placeholder:"Select person"})}),(0,a.jsx)(eo,{children:s.map(e=>(0,a.jsx)(ec,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"amount",children:"Amount"}),(0,a.jsx)(p,{id:"amount",type:"number",step:"0.01",min:"0",placeholder:"Enter amount",value:j.amount,onChange:e=>v({...j,amount:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"description",children:"Description"}),(0,a.jsx)($,{id:"description",placeholder:"What is this transaction for?",value:j.description,onChange:e=>v({...j,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"date",children:"Transaction Date"}),(0,a.jsx)(p,{id:"date",type:"date",value:j.date,onChange:e=>v({...j,date:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eP,{id:"include-expected-date",checked:j.includeExpectedDate,onCheckedChange:e=>{v({...j,includeExpectedDate:e,expectedReturnDate:e?j.expectedReturnDate||new Date().toISOString().split("T")[0]:""})}}),(0,a.jsx)(Q,{htmlFor:"include-expected-date",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Set expected return date"})]}),j.includeExpectedDate&&(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"expected-return-date",children:"Expected Return Date"}),(0,a.jsx)(p,{id:"expected-return-date",type:"date",value:j.expectedReturnDate,onChange:e=>v({...j,expectedReturnDate:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(Q,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(er,{value:j.status,onValueChange:e=>v({...j,status:e}),children:[(0,a.jsx)(ed,{children:(0,a.jsx)(en,{placeholder:"Select status"})}),(0,a.jsx)(eo,{children:"they-owe"===z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec,{value:"given",children:"Outstanding"}),(0,a.jsx)(ec,{value:"payed back",children:"Paid Back"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec,{value:"borrowed",children:"Outstanding"}),(0,a.jsx)(ec,{value:"returned",children:"Returned"})]})})]})]})]}),(0,a.jsxs)(H,{children:[(0,a.jsx)(h,{variant:"outline",onClick:()=>{l(!1),Y()},children:"Cancel"}),(0,a.jsx)(h,{onClick:o?()=>{if(!o||!j.personId||!j.amount||!j.date)return;let e="given"===j.status||"payed back"===j.status,t="borrowed"===j.status||"returned"===j.status,s=j.status;"they-owe"===z&&t?s="given":"you-owe"===z&&e&&(s="borrowed");let a={...o,personId:j.personId,amount:Number.parseFloat(j.amount),description:j.description||"",date:j.date,status:s};j.includeExpectedDate&&j.expectedReturnDate?a.expectedReturnDate=j.expectedReturnDate:delete a.expectedReturnDate,d(n.map(e=>e.id===o.id?a:e)),l(!1),Y()}:()=>{if(!j.personId||!j.amount||!j.date)return;let e={id:crypto.randomUUID(),personId:j.personId,amount:Number.parseFloat(j.amount),description:j.description||"",date:j.date,status:j.status||("they-owe"===z?"given":"borrowed")};j.includeExpectedDate&&j.expectedReturnDate&&(e.expectedReturnDate=j.expectedReturnDate),d([...n,e]),l(!1),Y()},children:o?"Update":"Add"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:[(0,a.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-zinc-100 to-zinc-50 dark:from-zinc-900 dark:to-zinc-950 py-3 px-4 border-b border-zinc-200 dark:border-zinc-700",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Total Transactions"})}),(0,a.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:(0,a.jsx)(em.A,{className:"h-5 w-5 text-zinc-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-3xl font-bold",children:n.length}),(0,a.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[1===n.length?"Transaction":"Transactions"," recorded"]})]})]})]}),(0,a.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-zinc-50 dark:from-green-950/30 dark:to-zinc-950 py-3 px-4 border-b border-green-100 dark:border-green-900/50",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"They Owe You"})}),(0,a.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:(0,a.jsx)(eu.A,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:c(et.totalOutstanding)}),(0,a.jsx)("div",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"Money coming in"})]})]})]}),(0,a.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-zinc-50 dark:from-red-950/30 dark:to-zinc-950 py-3 px-4 border-b border-red-100 dark:border-red-900/50",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"You Owe Them"})}),(0,a.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:(0,a.jsx)(ex.A,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:c(et.totalOwed)}),(0,a.jsx)("div",{className:"text-xs text-red-600/70 dark:text-red-400/70 mt-1",children:"Money going out"})]})]})]}),(0,a.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r py-3 px-4 border-b ".concat(et.netBalance>0?"from-green-50 to-zinc-50 dark:from-green-950/30 dark:to-zinc-950 border-green-100 dark:border-green-900/50":et.netBalance<0?"from-red-50 to-zinc-50 dark:from-red-950/30 dark:to-zinc-950 border-red-100 dark:border-red-900/50":"from-zinc-100 to-zinc-50 dark:from-zinc-900 dark:to-zinc-950 border-zinc-200 dark:border-zinc-700"),children:(0,a.jsx)("h3",{className:"text-sm font-medium ".concat(et.netBalance>0?"text-green-600 dark:text-green-400":et.netBalance<0?"text-red-600 dark:text-red-400":"text-zinc-500 dark:text-zinc-400"),children:"Net Balance"})}),(0,a.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(et.netBalance>0?"bg-green-100 dark:bg-green-900/30":et.netBalance<0?"bg-red-100 dark:bg-red-900/30":"bg-zinc-100 dark:bg-zinc-800"),children:(0,a.jsx)(eh.A,{className:"h-5 w-5 ".concat(et.netBalance>0?"text-green-600 dark:text-green-400":et.netBalance<0?"text-red-600 dark:text-red-400":"text-zinc-500")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-3xl font-bold ".concat(et.netBalance>0?"text-green-600 dark:text-green-400":et.netBalance<0?"text-red-600 dark:text-red-400":""),children:c(et.netBalance)}),(0,a.jsx)("div",{className:"text-xs mt-1 ".concat(et.netBalance>0?"text-green-600/70 dark:text-green-400/70":et.netBalance<0?"text-red-600/70 dark:text-red-400/70":"text-zinc-500 dark:text-zinc-400"),children:et.netBalance>0?"Net positive balance":et.netBalance<0?"Net negative balance":"Balanced"})]})]})]})]})]}),(0,a.jsx)(eC,{people:s,filters:A,setFilters:S,sorting:P,setSorting:_,overdueCount:et.overdueCount}),ee.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:ee.map(e=>{let t=s.find(t=>t.id===e.personId),r="given"===e.status||"payed back"===e.status,n="payed back"===e.status||"returned"===e.status,d=!n&&e.expectedReturnDate&&u(e.expectedReturnDate);return(0,a.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300 ".concat(n?"opacity-75":""),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-zinc-50 to-zinc-100 dark:from-zinc-900 dark:to-zinc-950 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-base font-semibold",children:(null==t?void 0:t.name)||"Unknown Person"}),d&&(0,a.jsx)(eI,{children:(0,a.jsxs)(eF,{children:[(0,a.jsx)(eU,{asChild:!0,children:(0,a.jsx)(ep.A,{className:"h-4 w-4 text-red-500 animate-pulse"})}),(0,a.jsx)(eE,{className:"bg-red-50 text-red-700 border border-red-200 dark:bg-red-950 dark:text-red-300 dark:border-red-800",children:(0,a.jsxs)("p",{className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(ef.A,{className:"h-3 w-3"}),"Payment Overdue"]})})]})})]}),(0,a.jsx)(b,{variant:n?"outline":"default",className:"px-2 py-0.5 text-xs ".concat(n?r?"border-green-300 text-green-700 dark:border-green-700 dark:text-green-400":"border-red-300 text-red-700 dark:border-red-700 dark:text-red-400":r?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:r?"given"===e.status?"They Owe You":"Paid Back":"borrowed"===e.status?"You Owe Them":"Returned"})]}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"text-xl font-bold",children:c(e.amount)}),(0,a.jsx)("span",{className:"text-xs font-medium ".concat(r?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:r?"+ Income":"- Expense"})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>W(e.id),children:n?(0,a.jsx)(L.A,{className:"h-3.5 w-3.5"}):(0,a.jsx)(ea.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>X(e),children:(0,a.jsx)(N.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-red-100 dark:hover:bg-red-900 hover:text-red-600",onClick:()=>G(e.id),children:(0,a.jsx)(y.A,{className:"h-3.5 w-3.5"})})]})]}),e.description&&(0,a.jsx)("div",{className:"bg-zinc-50 dark:bg-zinc-900 rounded px-2.5 py-1.5 mb-2 border border-zinc-100 dark:border-zinc-800 text-sm text-zinc-600 dark:text-zinc-300",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap text-xs gap-x-4 mt-1 text-zinc-500 dark:text-zinc-400",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eg.A,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{children:m(e.date)})]}),e.expectedReturnDate&&(0,a.jsxs)("div",{className:"flex items-center ".concat(d?"text-red-500":""),children:[(0,a.jsx)(ef.A,{className:"h-3 w-3 mr-1"}),(0,a.jsxs)("span",{children:["Due: ",m(e.expectedReturnDate)]}),d&&(0,a.jsx)("span",{className:"ml-1",children:"(Overdue)"})]})]})]})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-8 px-4 text-muted-foreground bg-zinc-50 dark:bg-zinc-950 rounded-lg border border-zinc-100 dark:border-zinc-800",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-3",children:(0,a.jsx)(k.A,{className:"h-6 w-6 text-zinc-400"})}),(0,a.jsx)("p",{className:"text-base mb-1",children:0===n.length?"No transactions added yet":"No transactions match your filters"}),(0,a.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:0===n.length?"Add a transaction to get started tracking debts":"Try adjusting your filter criteria"})]})]})});eL.displayName="DebtManager";var eJ=s(810),eV=s(1071),e_=s(1003),eY=s(2793),eM=s(6633),eZ=s(3674),eH=s(6190);let eq=eM.bL,eK=eM.l9;eM.YJ,eM.ZL,eM.Pb,eM.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:n,...d}=e;return(0,a.jsxs)(eM.ZP,{ref:t,className:o("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...d,children:[n,(0,a.jsx)(eZ.A,{className:"ml-auto"})]})}).displayName=eM.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eM.G5,{ref:t,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=eM.G5.displayName;let eG=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(eM.ZL,{children:(0,a.jsx)(eM.UC,{ref:t,sideOffset:r,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});eG.displayName=eM.UC.displayName;let eW=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(eM.q7,{ref:t,className:o("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n})});function eQ(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[d,i]=(0,r.useState)("debts"),[l,o]=(0,r.useState)(null),[c,m]=(0,r.useState)(!1),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("people"),s=localStorage.getItem("debts");e&&t(JSON.parse(e)),s&&n(JSON.parse(s))},[]),(0,r.useEffect)(()=>{localStorage.setItem("people",JSON.stringify(e)),localStorage.setItem("debts",JSON.stringify(s))},[e,s]);let x=t=>{if("json"===t){let t=new Blob([JSON.stringify({people:e,debts:s},null,2)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="debt-tracker-data.json",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}else if("csv"===t){let t=new Blob([["ID,Person,Amount,Description,Date,Status",...s.map(t=>{let s=e.find(e=>e.id===t.personId);return[t.id,(null==s?void 0:s.name)||"Unknown",t.amount,t.description,t.date,t.status]}).map(e=>e.join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="debt-tracker-data.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}},p=e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;let r=new FileReader;r.onload=e=>{try{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result,r=JSON.parse(a);r.people&&Array.isArray(r.people)&&t(r.people),r.debts&&Array.isArray(r.debts)&&n(r.debts),(0,eY.oR)("Data imported successfully!")}catch(e){eY.oR.error("Failed to import data!",{description:"Please make sure the file is valid JSON."})}},r.readAsText(a),e.target.value=""};return(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex justify-between border-b pb-4 flex-col sm:flex-row items-end",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-zinc-800 to-zinc-600 dark:from-zinc-200 dark:to-zinc-400 bg-clip-text text-transparent",children:"Debtly"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Keep track of money you owe and money owed to you"})]}),(0,a.jsxs)("div",{className:"hidden md:flex flex-wrap gap-2",children:[(0,a.jsxs)(h,{variant:"outline",onClick:()=>x("json"),className:"flex items-center gap-2 bg-white dark:bg-zinc-900 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-800",children:[(0,a.jsx)(eJ.A,{className:"h-4 w-4"}),"Export JSON"]}),(0,a.jsxs)(h,{variant:"outline",onClick:()=>x("csv"),className:"flex items-center gap-2 bg-white dark:bg-zinc-900 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-800",children:[(0,a.jsx)(eJ.A,{className:"h-4 w-4"}),"Export CSV"]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(h,{variant:"outline",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-800",children:[(0,a.jsx)("input",{type:"file",accept:".json",id:"import-json",className:"absolute inset-0 opacity-0 w-full cursor-pointer",onChange:p}),(0,a.jsx)(eV.A,{className:"h-4 w-4"}),"Import JSON"]})})]}),(0,a.jsxs)(eq,{children:[(0,a.jsx)(eK,{asChild:!0,className:"md:hidden",children:(0,a.jsxs)(h,{variant:"outline",size:"sm",className:"bg-white dark:bg-zinc-900",children:[(0,a.jsx)(e_.A,{className:"h-4 w-4 mr-2"}),"Options"]})}),(0,a.jsxs)(eG,{align:"end",className:"w-48",children:[(0,a.jsxs)(eW,{onClick:()=>x("json"),children:[(0,a.jsx)(eJ.A,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),(0,a.jsxs)(eW,{onClick:()=>x("csv"),children:[(0,a.jsx)(eJ.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),(0,a.jsxs)(eW,{children:[(0,a.jsxs)("label",{htmlFor:"mobile-import-json",className:"flex items-center cursor-pointer w-full",children:[(0,a.jsx)(eV.A,{className:"h-4 w-4 mr-2"}),"Import JSON"]}),(0,a.jsx)("input",{type:"file",accept:".json",id:"mobile-import-json",className:"hidden",onChange:p})]})]})]})]}),(0,a.jsx)("div",{className:"rounded-xl",children:(0,a.jsxs)(eD,{value:d,onValueChange:i,className:"w-full",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsxs)(eA,{className:"grid w-52 grid-cols-2 rounded-lg bg-zinc-100 dark:bg-zinc-900",children:[(0,a.jsxs)(eS,{value:"debts",className:"rounded-md font-medium",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),"Transactions"]}),(0,a.jsxs)(eS,{value:"people",className:"rounded-md font-medium",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"People"]})]})}),(0,a.jsx)(eO,{value:"debts",className:"mt-2 focus-visible:outline-none focus-visible:ring-0",children:(0,a.jsx)(eL,{ref:u,people:e,debts:s,setDebts:n})}),(0,a.jsx)(eO,{value:"people",className:"mt-2 focus-visible:outline-none focus-visible:ring-0",children:(0,a.jsx)(X,{people:e,setPeople:t,debts:s,onAddDebt:(e,t)=>{i("debts"),setTimeout(()=>{u.current&&u.current.initFormForPerson(e,t)},0)}})})]})})]})})}eW.displayName=eM.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:n,...d}=e;return(0,a.jsxs)(eM.H_,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...d,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eM.VF,{children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})}),r]})}).displayName=eM.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(eM.hN,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eM.VF,{children:(0,a.jsx)(eH.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=eM.hN.displayName,r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(eM.JU,{ref:t,className:o("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})}).displayName=eM.JU.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eM.wv,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=eM.wv.displayName;var eX=s(3041);function e$(e){let{children:t,...s}=e;return(0,a.jsx)(eX.N,{...s,children:t})}function e0(){return(0,a.jsx)(e$,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:(0,a.jsx)("main",{className:"min-h-screen p-4 md:p-8",children:(0,a.jsx)(eQ,{})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[676,142,767,358],()=>t(9629)),_N_E=e.O()}]);