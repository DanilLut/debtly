(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1431:(e,t,a)=>{Promise.resolve().then(a.bind(a,8416))},8416:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tr});var s=a(4001),r=a(7749),n=a(8864),d=a(8069),i=a(3549),l=a(2184);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,i.$)(t))}function c(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"UAH"}).format(e)}function m(e){let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}function u(e){let t=new Date;t.setHours(0,0,0,0);let a=new Date(e);return a.setHours(0,0,0,0),a<t}let x=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,t)=>{let{className:a,variant:r,size:d,asChild:i=!1,...l}=e,c=i?n.DX:"button";return(0,s.jsx)(c,{className:o(x({variant:r,size:d,className:a})),ref:t,...l})});h.displayName="Button";let p=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});p.displayName="Input";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});f.displayName="Card",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",a),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",a),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:o("p-6 pt-0",a),...r})});g.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";let b=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function j(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:o(b({variant:a}),t),...r})}var v=a(8332),N=a(2807),y=a(2786),w=a(4803),k=a(2324),z=a(9098),C=a(5098);let D=C.bL,R=C.l9,A=C.ZL,S=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.hJ,{className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});S.displayName=C.hJ.displayName;let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(A,{children:[(0,s.jsx)(S,{}),(0,s.jsx)(C.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});O.displayName=C.UC.displayName;let I=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",t),...a})};I.displayName="AlertDialogHeader";let F=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};F.displayName="AlertDialogFooter";let T=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.hE,{ref:t,className:o("text-lg font-semibold",a),...r})});T.displayName=C.hE.displayName;let _=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.VY,{ref:t,className:o("text-sm text-muted-foreground",a),...r})});_.displayName=C.VY.displayName;let U=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.rc,{ref:t,className:o(x(),a),...r})});U.displayName=C.rc.displayName;let E=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(C.ZD,{ref:t,className:o(x({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});E.displayName=C.ZD.displayName;var P=a(3457),B=a(1106);let J=P.bL,L=P.l9,V=P.ZL;P.bm;let M=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(P.hJ,{ref:t,className:o("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});M.displayName=P.hJ.displayName;let Y=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(V,{children:[(0,s.jsx)(M,{}),(0,s.jsxs)(P.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(P.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(B.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});Y.displayName=P.UC.displayName;let H=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:o("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};H.displayName="DialogHeader";let Z=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};Z.displayName="DialogFooter";let G=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(P.hE,{ref:t,className:o("text-lg font-semibold leading-none tracking-tight",a),...r})});G.displayName=P.hE.displayName;let q=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(P.VY,{ref:t,className:o("text-sm text-muted-foreground",a),...r})});q.displayName=P.VY.displayName;var K=a(5708);let Q=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),W=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(K.b,{ref:t,className:o(Q(),a),...r})});function X(e){let{people:t,setPeople:a,debts:n,onAddDebt:d}=e,[i,l]=(0,r.useState)(""),[o,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[b,C]=(0,r.useState)(""),R=()=>{""!==i.trim()&&(a([...t,{id:crypto.randomUUID(),name:i.trim()}]),l(""))},A=e=>{n.some(t=>t.personId===e.id)?m(e):a(t.filter(t=>t.id!==e.id))},S=e=>{x(e),C(e.name)},P=()=>{u&&""!==b.trim()&&(a(t.map(e=>e.id===u.id?{...e,name:b.trim()}:e)),x(null),C(""))},B=e=>{let t=n.filter(t=>t.personId===e),a=t.filter(e=>"given"===e.status),s=t.filter(e=>"payed back"===e.status),r=t.filter(e=>"borrowed"===e.status),d=t.filter(e=>"returned"===e.status),i=a.reduce((e,t)=>e+t.amount,0),l=s.reduce((e,t)=>e+t.amount,0),o=r.reduce((e,t)=>e+t.amount,0),c=d.reduce((e,t)=>e+t.amount,0);return{totalDebts:t.length,outstandingCount:a.length,paidCount:s.length,borrowedCount:r.length,returnedCount:d.length,totalOutstanding:i,totalPaid:l,totalBorrowed:o,totalReturned:c}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"People"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(p,{placeholder:"Enter person's name",value:i,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R()}}),(0,s.jsx)(h,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white",onClick:R,children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})]})]}),t.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{let t=B(e.id),a=t.totalOutstanding-t.totalBorrowed,r=t.totalDebts>0;return(0,s.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-zinc-900 to-zinc-950 dark:from-zinc-900 dark:to-zinc-950 p-4 border-b",children:(0,s.jsxs)("div",{className:"flex justify-between items-start flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full",onClick:()=>S(e),children:(0,s.jsx)(N.A,{className:"h-3.5 w-3.5"})})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"relative group",children:(0,s.jsxs)(h,{variant:"outline",size:"sm",className:"h-7 px-2.5 text-xs bg-white dark:bg-zinc-800 hover:bg-violet-50 dark:hover:bg-zinc-700",onClick:()=>d(e.id,!1),children:[(0,s.jsx)(y.A,{className:"h-3 w-3 mr-1.5 text-green-600"}),"They owe"]})}),(0,s.jsx)("div",{className:"relative group",children:(0,s.jsxs)(h,{variant:"outline",size:"sm",className:"h-7 px-2.5 text-xs bg-white dark:bg-zinc-800 hover:bg-red-50 dark:hover:bg-zinc-700",onClick:()=>d(e.id,!0),children:[(0,s.jsx)(y.A,{className:"h-3 w-3 mr-1.5 text-red-500"}),"You owe"]})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-red-100 dark:hover:bg-red-900 hover:text-red-600 transition-colors",onClick:()=>A(e),children:(0,s.jsx)(w.A,{className:"h-3.5 w-3.5"})})]})]})}),(0,s.jsx)(g,{className:"p-4",children:r?(0,s.jsxs)("div",{className:"space-y-4",children:[(t.outstandingCount>0||t.paidCount>0)&&(0,s.jsxs)("div",{className:"space-y-2.5 bg-green-50 dark:bg-green-950/30 rounded-lg p-3",children:[(0,s.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-green-500"}),"They owe you:"]}),t.outstandingCount>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(j,{variant:"default",className:"h-5 bg-green-500 hover:bg-green-600",children:t.outstandingCount}),(0,s.jsx)("span",{className:"text-sm",children:"Outstanding"})]}),(0,s.jsx)("span",{className:"font-medium text-green-700 dark:text-green-400",children:c(t.totalOutstanding)})]}),t.paidCount>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(j,{variant:"outline",className:"h-5 border-green-300 text-green-700 dark:border-green-700 dark:text-green-400",children:t.paidCount}),(0,s.jsx)("span",{className:"text-sm",children:"Paid back"})]}),(0,s.jsx)("span",{className:"font-medium text-muted-foreground",children:c(t.totalPaid)})]})]}),(t.borrowedCount>0||t.returnedCount>0)&&(0,s.jsxs)("div",{className:"space-y-2.5 bg-red-50 dark:bg-red-950/30 rounded-lg p-3",children:[(0,s.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-500"}),"You owe them:"]}),t.borrowedCount>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(j,{variant:"destructive",className:"h-5",children:t.borrowedCount}),(0,s.jsx)("span",{className:"text-sm",children:"Outstanding"})]}),(0,s.jsx)("span",{className:"font-medium text-red-700 dark:text-red-400",children:c(t.totalBorrowed)})]}),t.returnedCount>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(j,{variant:"outline",className:"h-5 border-red-300 text-red-700 dark:border-red-700 dark:text-red-400",children:t.returnedCount}),(0,s.jsx)("span",{className:"text-sm",children:"Returned"})]}),(0,s.jsx)("span",{className:"font-medium text-muted-foreground",children:c(t.totalReturned)})]})]}),(0,s.jsx)("div",{className:"pt-3 mt-2 border-t",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:"Net balance:"}),(0,s.jsx)("span",{className:"font-bold text-lg ".concat(a>0?"text-green-600 dark:text-green-400":a<0?"text-red-600 dark:text-red-400":""),children:c(a)})]})})]}):(0,s.jsxs)("div",{className:"text-center py-6 text-muted-foreground flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-3",children:(0,s.jsx)(k.A,{className:"h-6 w-6 text-zinc-400"})}),(0,s.jsx)("p",{className:"text-sm",children:"No debts recorded"})]})})]},e.id)})}):(0,s.jsxs)("div",{className:"text-center py-12 px-4 text-muted-foreground bg-zinc-50 dark:bg-zinc-900 rounded-lg",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:(0,s.jsx)(z.A,{className:"h-8 w-8 text-zinc-400"})}),(0,s.jsx)("p",{className:"text-lg mb-2",children:"No people added yet"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Add someone to get started tracking debts"})]}),(0,s.jsx)(D,{open:!!o,onOpenChange:()=>m(null),children:(0,s.jsxs)(O,{children:[(0,s.jsxs)(I,{children:[(0,s.jsx)(T,{children:"Are you sure?"}),(0,s.jsx)(_,{children:"This person has debts associated with them. Deleting them will remove all their debt records as well."})]}),(0,s.jsxs)(F,{children:[(0,s.jsx)(E,{children:"Cancel"}),(0,s.jsx)(U,{onClick:()=>{o&&(a(t.filter(e=>e.id!==o.id)),m(null))},children:"Delete"})]})]})}),(0,s.jsx)(J,{open:!!u,onOpenChange:e=>{e||x(null)},children:(0,s.jsxs)(Y,{children:[(0,s.jsxs)(H,{children:[(0,s.jsx)(G,{children:"Edit Person"}),(0,s.jsx)(q,{children:"Update the person's name below."})]}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{htmlFor:"name",children:"Name"}),(0,s.jsx)(p,{id:"name",value:b,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&P()}})]})}),(0,s.jsx)(Z,{children:(0,s.jsx)(h,{onClick:P,children:"Save Changes"})})]})})]})}W.displayName=K.b.displayName;var $=a(9433),ee=a(1792),et=a(6745),ea=a(8602);let es=$.bL;$.YJ;let er=$.WT,en=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)($.l9,{ref:t,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)($.In,{asChild:!0,children:(0,s.jsx)(ee.A,{className:"h-4 w-4 opacity-50"})})]})});en.displayName=$.l9.displayName;let ed=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)($.PP,{ref:t,className:o("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(et.A,{className:"h-4 w-4"})})});ed.displayName=$.PP.displayName;let ei=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)($.wn,{ref:t,className:o("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(ee.A,{className:"h-4 w-4"})})});ei.displayName=$.wn.displayName;let el=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...d}=e;return(0,s.jsx)($.ZL,{children:(0,s.jsxs)($.UC,{ref:t,className:o("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...d,children:[(0,s.jsx)(ed,{}),(0,s.jsx)($.LM,{className:o("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(ei,{})]})})});el.displayName=$.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)($.JU,{ref:t,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=$.JU.displayName;let eo=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)($.q7,{ref:t,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)($.VF,{children:(0,s.jsx)(ea.A,{className:"h-4 w-4"})})}),(0,s.jsx)($.p4,{children:r})]})});eo.displayName=$.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)($.wv,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=$.wv.displayName;var ec=a(4610);let em=ec.bL,eu=ec.l9,ex=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:n=4,...d}=e;return(0,s.jsx)(ec.ZL,{children:(0,s.jsx)(ec.UC,{ref:t,align:r,sideOffset:n,className:o("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",a),...d})})});ex.displayName=ec.UC.displayName;var eh=a(8344),ep=a(2625),ef=a(3026),eg=a(9072);let eb=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eg.bL,{className:o("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(eg.zi,{className:o("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});eb.displayName=eg.bL.displayName;var ej=a(7796),ev=a(2618),eN=a(3441),ey=a(3674),ew=a(5864);function ek(e){let{className:t,classNames:a,showOutsideDays:r=!0,...n}=e;return(0,s.jsx)(ew.hv,{showOutsideDays:r,className:o("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:o(x({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:o(x({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(eN.A,{className:o("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(ey.A,{className:o("h-4 w-4",t),...a})}},...n})}ek.displayName="Calendar";var ez=a(6900);function eC(e){let{dateRange:t,onDateRangeChange:a,className:n}=e,[d,i]=r.useState(!1);return(0,s.jsxs)(em,{open:d,onOpenChange:i,children:[(0,s.jsx)(eu,{asChild:!0,children:(0,s.jsxs)(h,{variant:"outline",className:o("w-full justify-start text-left font-normal",!t.from&&"text-muted-foreground",n),children:[(0,s.jsx)(ez.A,{className:"mr-2 h-4 w-4"}),t.from?t.to?(0,s.jsxs)("span",{children:[(0,ev.GP)(t.from,"MMM dd, yyyy")," -"," ",(0,ev.GP)(t.to,"MMM dd, yyyy")]}):(0,ev.GP)(t.from,"MMM dd, yyyy"):(0,s.jsx)("span",{children:"Pick a date range"}),(t.from||t.to)&&(0,s.jsx)(B.A,{className:"ml-auto h-4 w-4 opacity-70 hover:opacity-100",onClick:e=>{e.stopPropagation(),a({from:void 0,to:void 0})}})]})}),(0,s.jsxs)(ex,{className:"w-auto p-0",align:"start",children:[(0,s.jsxs)("div",{className:"p-3 border-b border-border",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Select Date Range"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose start and end dates"})]}),(0,s.jsx)(ek,{mode:"range",selected:{from:t.from,to:t.to},onSelect:e=>a(e||{from:void 0,to:void 0}),numberOfMonths:1,className:"p-3"}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 p-3 border-t border-border",children:[(0,s.jsx)(h,{variant:"outline",size:"sm",onClick:()=>a({from:void 0,to:void 0}),className:"text-xs",children:"Clear"}),(0,s.jsx)(h,{size:"sm",onClick:()=>i(!1),className:"text-xs",children:"Apply"})]})]})]})}function eD(e){let{people:t,filters:a,setFilters:n,sorting:d,setSorting:i,overdueCount:l}=e,[o,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),[p,f]=(0,r.useState)({from:void 0,to:void 0}),g=()=>{n({personId:"",status:"",minAmount:"",maxAmount:"",type:"",overdue:!1,startDate:"",endDate:""}),f({from:void 0,to:void 0})},b=a.personId||a.status||a.minAmount||a.maxAmount||a.type||a.overdue||a.startDate||a.endDate,v=parseFloat(a.minAmount)||0,N=parseFloat(a.maxAmount)||1e3;return(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(em,{open:o,onOpenChange:m,children:[(0,s.jsx)(eu,{asChild:!0,children:(0,s.jsxs)(h,{variant:"outline",className:"flex items-center gap-2","aria-expanded":o,children:[(0,s.jsx)(eh.A,{className:"h-4 w-4"}),"Filter",b&&(0,s.jsx)("span",{className:"ml-1 rounded-full bg-primary w-2 h-2"}),a.overdue&&(0,s.jsxs)(j,{variant:"outline",className:"ml-1 px-1 py-0 h-5 text-xs border-red-500 text-red-500",children:[(0,s.jsx)(ep.A,{className:"h-3 w-3 mr-1"}),"Overdue"]})]})}),(0,s.jsx)(ex,{className:"w-80",children:(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium leading-none",children:"Filters"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Filter transactions by various criteria"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[(0,s.jsx)(W,{htmlFor:"filter-type",children:"Transaction Type"}),(0,s.jsxs)(es,{value:a.type,onValueChange:e=>n({...a,type:"all_types"===e?"":e}),children:[(0,s.jsx)(en,{id:"filter-type",children:(0,s.jsx)(er,{placeholder:"All types"})}),(0,s.jsxs)(el,{children:[(0,s.jsx)(eo,{value:"all_types",children:"All types"}),(0,s.jsx)(eo,{value:"they-owe",children:"They owe you"}),(0,s.jsx)(eo,{value:"you-owe",children:"You owe them"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-1",children:[(0,s.jsx)(W,{htmlFor:"filter-person",children:"Person"}),(0,s.jsxs)(es,{value:a.personId,onValueChange:e=>n({...a,personId:"all_people"===e?"":e}),children:[(0,s.jsx)(en,{id:"filter-person",children:(0,s.jsx)(er,{placeholder:"All people"})}),(0,s.jsxs)(el,{children:[(0,s.jsx)(eo,{value:"all_people",children:"All people"}),t.map(e=>(0,s.jsx)(eo,{value:e.id,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{className:"grid gap-1",children:[(0,s.jsx)(W,{htmlFor:"filter-status",children:"Status"}),(0,s.jsxs)(es,{value:a.status,onValueChange:e=>n({...a,status:"all_statuses"===e?"":e}),children:[(0,s.jsx)(en,{id:"filter-status",children:(0,s.jsx)(er,{placeholder:"All statuses"})}),(0,s.jsxs)(el,{children:[(0,s.jsx)(eo,{value:"all_statuses",children:"All statuses"}),(0,s.jsx)(eo,{value:"given",children:"They Owe - Outstanding"}),(0,s.jsx)(eo,{value:"payed back",children:"They Owe - Paid Back"}),(0,s.jsx)(eo,{value:"borrowed",children:"You Owe - Outstanding"}),(0,s.jsx)(eo,{value:"returned",children:"You Owe - Returned"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{children:"Date Range"}),(0,s.jsx)(eC,{dateRange:p,onDateRangeChange:e=>{f(e),n({...a,startDate:e.from?(0,ev.GP)(e.from,"yyyy-MM-dd"):"",endDate:e.to?(0,ev.GP)(e.to,"yyyy-MM-dd"):""})}})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{children:"Amount Range"}),(0,s.jsxs)(ej.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:[v,N],min:0,max:1e3,step:1,onValueChange:e=>{n({...a,minAmount:e[0].toString(),maxAmount:e[1].toString()})},children:[(0,s.jsx)(ej.CC,{className:"bg-zinc-100 dark:bg-zinc-800 relative grow rounded-full h-1",children:(0,s.jsx)(ej.Q6,{className:"absolute bg-zinc-500 dark:bg-zinc-600 rounded-full h-full"})}),(0,s.jsx)(ej.zi,{className:"block w-5 h-5 bg-white dark:bg-zinc-900 shadow-lg rounded-full focus:outline-none focus:ring-2 focus:ring-zinc-500"}),(0,s.jsx)(ej.zi,{className:"block w-5 h-5 bg-white dark:bg-zinc-900 shadow-lg rounded-full focus:outline-none focus:ring-2 focus:ring-zinc-500"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm text-zinc-500 dark:text-zinc-400",children:[(0,s.jsx)("span",{children:c(v)}),(0,s.jsx)("span",{children:c(N)})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eb,{id:"overdue-filter",checked:a.overdue,onCheckedChange:e=>n({...a,overdue:e})}),(0,s.jsxs)(W,{htmlFor:"overdue-filter",className:"flex items-center",children:[(0,s.jsx)("span",{children:"Show overdue only"}),l>0&&(0,s.jsx)(j,{variant:"outline",className:"ml-2 px-1 py-0 h-5 text-xs border-red-500 text-red-500",children:l})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(h,{variant:"outline",size:"sm",onClick:g,disabled:!b,children:"Reset"}),(0,s.jsx)(h,{size:"sm",onClick:()=>m(!1),children:"Apply"})]})]})})]}),(0,s.jsxs)(em,{open:u,onOpenChange:x,children:[(0,s.jsx)(eu,{asChild:!0,children:(0,s.jsxs)(h,{variant:"outline",className:"flex items-center gap-2","aria-expanded":u,children:[(0,s.jsx)(ef.A,{className:"h-4 w-4"}),"Sort"]})}),(0,s.jsx)(ex,{className:"w-72",children:(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium leading-none",children:"Sort"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sort transactions by various criteria"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[(0,s.jsx)(W,{htmlFor:"sort-field",children:"Sort By"}),(0,s.jsxs)(es,{value:d.field,onValueChange:e=>i({...d,field:e}),children:[(0,s.jsx)(en,{id:"sort-field",children:(0,s.jsx)(er,{placeholder:"Select field"})}),(0,s.jsxs)(el,{children:[(0,s.jsx)(eo,{value:"date",children:"Transaction Date"}),(0,s.jsx)(eo,{value:"dueDate",children:"Due Date"}),(0,s.jsx)(eo,{value:"amount",children:"Amount"}),(0,s.jsx)(eo,{value:"personName",children:"Person Name"}),(0,s.jsx)(eo,{value:"status",children:"Status"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-1",children:[(0,s.jsx)(W,{htmlFor:"sort-direction",children:"Direction"}),(0,s.jsxs)(es,{value:d.direction,onValueChange:e=>i({...d,direction:e}),children:[(0,s.jsx)(en,{id:"sort-direction",children:(0,s.jsx)(er,{placeholder:"Select direction"})}),(0,s.jsxs)(el,{children:[(0,s.jsx)(eo,{value:"asc",children:"Ascending"}),(0,s.jsx)(eo,{value:"desc",children:"Descending"})]})]})]})]}),(0,s.jsx)(h,{size:"sm",onClick:()=>x(!1),children:"Apply"})]})})]})]}),b&&(0,s.jsxs)(h,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:g,children:[(0,s.jsx)(B.A,{className:"h-3 w-3 mr-1"}),"Clear filters"]})]})}var eR=a(6958);let eA=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eR.bL,{ref:t,className:o("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(eR.C1,{className:o("flex items-center justify-center text-current"),children:(0,s.jsx)(ea.A,{className:"h-4 w-4"})})})});eA.displayName=eR.bL.displayName;var eS=a(3750);let eO=eS.bL,eI=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eS.B8,{ref:t,className:o("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});eI.displayName=eS.B8.displayName;let eF=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eS.l9,{ref:t,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});eF.displayName=eS.l9.displayName;let eT=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eS.UC,{ref:t,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});eT.displayName=eS.UC.displayName;let e_=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});e_.displayName="Textarea";var eU=a(5018);let eE=eU.Kq,eP=eU.bL,eB=eU.l9,eJ=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(eU.UC,{ref:t,sideOffset:r,className:o("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",a),...n})});eJ.displayName=eU.UC.displayName;var eL=a(4275),eV=a(7511),eM=a(9442),eY=a(5636),eH=a(3088),eZ=a(6684);let eG=(0,r.forwardRef)((e,t)=>{let{people:a,debts:n,setDebts:d}=e,[i,l]=(0,r.useState)(!1),[o,x]=(0,r.useState)(null),[b,v]=(0,r.useState)({personId:"",amount:"",description:"",date:new Date().toISOString().split("T")[0],expectedReturnDate:"",includeExpectedDate:!1,status:"given"}),[z,C]=(0,r.useState)("they-owe");(0,r.useImperativeHandle)(t,()=>({initFormForPerson:(e,t)=>{v({personId:e,amount:"",description:"",date:new Date().toISOString().split("T")[0],expectedReturnDate:"",includeExpectedDate:!1,status:t?"borrowed":"given"}),C(t?"you-owe":"they-owe"),l(!0)}}));let[A,S]=(0,r.useState)({personId:"",status:"",minAmount:"",maxAmount:"",type:"",overdue:!1,startDate:"",endDate:""}),[P,V]=(0,r.useState)({field:"date",direction:"desc"}),M=()=>{v({personId:"",amount:"",description:"",date:new Date().toISOString().split("T")[0],expectedReturnDate:"",includeExpectedDate:!1,status:"given"}),C("they-owe"),x(null)},K=e=>{d(n.filter(t=>t.id!==e))},Q=e=>{d(n.map(t=>{if(t.id===e){let e;return e="given"===t.status?"payed back":"payed back"===t.status?"given":"borrowed"===t.status?"returned":"borrowed",{...t,status:e}}return t}))},X=e=>{x(e),v({personId:e.personId,amount:e.amount.toString(),description:e.description,date:e.date,expectedReturnDate:e.expectedReturnDate||"",includeExpectedDate:!!e.expectedReturnDate,status:e.status}),"given"===e.status||"payed back"===e.status?C("they-owe"):C("you-owe"),l(!0)},$=(0,r.useMemo)(()=>{let e=n.filter(e=>{if(A.startDate&&A.endDate){let t=new Date(e.date),a=new Date(A.startDate),s=new Date(A.endDate);if(t<a||t>s)return!1}return!(A.personId&&e.personId!==A.personId||A.status&&e.status!==A.status||"they-owe"===A.type&&("borrowed"===e.status||"returned"===e.status)||"you-owe"===A.type&&("given"===e.status||"payed back"===e.status)||A.overdue&&(!("given"===e.status||"borrowed"===e.status)||!e.expectedReturnDate||!u(e.expectedReturnDate))||A.minAmount&&e.amount<Number.parseFloat(A.minAmount)||A.maxAmount&&e.amount>Number.parseFloat(A.maxAmount))});return e.sort((e,t)=>{if("personName"===P.field){var s,r;let n=(null===(s=a.find(t=>t.id===e.personId))||void 0===s?void 0:s.name)||"",d=(null===(r=a.find(e=>e.id===t.personId))||void 0===r?void 0:r.name)||"";return"asc"===P.direction?n.localeCompare(d):d.localeCompare(n)}return"date"===P.field?"asc"===P.direction?new Date(e.date).getTime()-new Date(t.date).getTime():new Date(t.date).getTime()-new Date(e.date).getTime():"dueDate"===P.field?e.expectedReturnDate||t.expectedReturnDate?e.expectedReturnDate?t.expectedReturnDate?"asc"===P.direction?new Date(e.expectedReturnDate).getTime()-new Date(t.expectedReturnDate).getTime():new Date(t.expectedReturnDate).getTime()-new Date(e.expectedReturnDate).getTime():"asc"===P.direction?-1:1:"asc"===P.direction?1:-1:0:"amount"===P.field?"asc"===P.direction?e.amount-t.amount:t.amount-e.amount:0}),e},[n,A,P,a]),ee=(0,r.useMemo)(()=>{let e=n.filter(e=>"given"===e.status),t=n.filter(e=>"payed back"===e.status),a=n.filter(e=>"borrowed"===e.status),s=n.filter(e=>"returned"===e.status),r=n.filter(e=>("given"===e.status||"borrowed"===e.status)&&e.expectedReturnDate&&u(e.expectedReturnDate)),d=e.reduce((e,t)=>e+t.amount,0),i=a.reduce((e,t)=>e+t.amount,0);return{givenCount:e.length,paidBackCount:t.length,borrowedCount:a.length,returnedCount:s.length,overdueCount:r.length,totalOutstanding:d,totalOwed:i,netBalance:d-i}},[n]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Transactions"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(D,{children:[(0,s.jsx)(R,{asChild:!0,children:(0,s.jsx)(h,{variant:"outline",title:"Remove All Settled",className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white",disabled:!n.some(e=>"payed back"===e.status||"returned"===e.status),children:(0,s.jsx)(eL.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(O,{children:[(0,s.jsxs)(I,{children:[(0,s.jsx)(T,{children:"Are you sure?"}),(0,s.jsx)(_,{children:'This will remove all debts with "Paid Back" or "Returned" status. This action cannot be undone.'})]}),(0,s.jsxs)(F,{children:[(0,s.jsx)(E,{children:"Cancel"}),(0,s.jsx)(U,{onClick:()=>{d(n.filter(e=>"payed back"!==e.status&&"returned"!==e.status))},children:"Remove All"})]})]})]}),(0,s.jsxs)(J,{open:i,onOpenChange:l,children:[(0,s.jsx)(L,{asChild:!0,children:(0,s.jsx)(h,{disabled:0===a.length,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white",children:(0,s.jsx)(y.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(Y,{children:[(0,s.jsxs)(H,{children:[(0,s.jsx)(G,{children:o?"Edit Transaction":"Add New Transaction"}),(0,s.jsx)(q,{children:o?"Update the transaction details below.":"Enter the details of the transaction below."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsx)(eO,{value:z,onValueChange:e=>{C(e),"they-owe"===e?v({...b,status:(null==o?void 0:o.status)==="payed back"?"payed back":"given"}):v({...b,status:(null==o?void 0:o.status)==="returned"?"returned":"borrowed"})},className:"w-full",children:(0,s.jsxs)(eI,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(eF,{value:"they-owe",children:"They Owe You"}),(0,s.jsx)(eF,{value:"you-owe",children:"You Owe Them"})]})}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{htmlFor:"person",children:"Person"}),(0,s.jsxs)(es,{value:b.personId,onValueChange:e=>v({...b,personId:e}),children:[(0,s.jsx)(en,{children:(0,s.jsx)(er,{placeholder:"Select person"})}),(0,s.jsx)(el,{children:a.map(e=>(0,s.jsx)(eo,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{htmlFor:"amount",children:"Amount"}),(0,s.jsx)(p,{id:"amount",type:"number",step:"0.01",min:"0",placeholder:"Enter amount",value:b.amount,onChange:e=>v({...b,amount:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{htmlFor:"description",children:"Description"}),(0,s.jsx)(e_,{id:"description",placeholder:"What is this transaction for?",value:b.description,onChange:e=>v({...b,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{htmlFor:"date",children:"Transaction Date"}),(0,s.jsx)(p,{id:"date",type:"date",value:b.date,onChange:e=>v({...b,date:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eA,{id:"include-expected-date",checked:b.includeExpectedDate,onCheckedChange:e=>{v({...b,includeExpectedDate:e,expectedReturnDate:e?b.expectedReturnDate||new Date().toISOString().split("T")[0]:""})}}),(0,s.jsx)(W,{htmlFor:"include-expected-date",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Set expected return date"})]}),b.includeExpectedDate&&(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{htmlFor:"expected-return-date",children:"Expected Return Date"}),(0,s.jsx)(p,{id:"expected-return-date",type:"date",value:b.expectedReturnDate,onChange:e=>v({...b,expectedReturnDate:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(W,{htmlFor:"status",children:"Status"}),(0,s.jsxs)(es,{value:b.status,onValueChange:e=>v({...b,status:e}),children:[(0,s.jsx)(en,{children:(0,s.jsx)(er,{placeholder:"Select status"})}),(0,s.jsx)(el,{children:"they-owe"===z?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{value:"given",children:"Outstanding"}),(0,s.jsx)(eo,{value:"payed back",children:"Paid Back"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{value:"borrowed",children:"Outstanding"}),(0,s.jsx)(eo,{value:"returned",children:"Returned"})]})})]})]})]}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(h,{variant:"outline",onClick:()=>{l(!1),M()},children:"Cancel"}),(0,s.jsx)(h,{onClick:o?()=>{if(!o||!b.personId||!b.amount||!b.date)return;let e="given"===b.status||"payed back"===b.status,t="borrowed"===b.status||"returned"===b.status,a=b.status;"they-owe"===z&&t?a="given":"you-owe"===z&&e&&(a="borrowed");let s={...o,personId:b.personId,amount:Number.parseFloat(b.amount),description:b.description||"",date:b.date,status:a};b.includeExpectedDate&&b.expectedReturnDate?s.expectedReturnDate=b.expectedReturnDate:delete s.expectedReturnDate,d(n.map(e=>e.id===o.id?s:e)),l(!1),M()}:()=>{if(!b.personId||!b.amount||!b.date)return;let e={id:crypto.randomUUID(),personId:b.personId,amount:Number.parseFloat(b.amount),description:b.description||"",date:b.date,status:b.status||("they-owe"===z?"given":"borrowed")};b.includeExpectedDate&&b.expectedReturnDate&&(e.expectedReturnDate=b.expectedReturnDate),d([...n,e]),l(!1),M()},children:o?"Update":"Add"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:[(0,s.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-zinc-100 to-zinc-50 dark:from-zinc-900 dark:to-zinc-950 py-3 px-4 border-b border-zinc-200 dark:border-zinc-700",children:(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Total Transactions"})}),(0,s.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:(0,s.jsx)(eV.A,{className:"h-5 w-5 text-zinc-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold",children:n.length}),(0,s.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[1===n.length?"Transaction":"Transactions"," recorded"]})]})]})]}),(0,s.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-zinc-50 dark:from-green-950/30 dark:to-zinc-950 py-3 px-4 border-b border-green-100 dark:border-green-900/50",children:(0,s.jsx)("h3",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"They Owe You"})}),(0,s.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:(0,s.jsx)(eM.A,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:c(ee.totalOutstanding)}),(0,s.jsx)("div",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"Money coming in"})]})]})]}),(0,s.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-red-50 to-zinc-50 dark:from-red-950/30 dark:to-zinc-950 py-3 px-4 border-b border-red-100 dark:border-red-900/50",children:(0,s.jsx)("h3",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"You Owe Them"})}),(0,s.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:(0,s.jsx)(eY.A,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:c(ee.totalOwed)}),(0,s.jsx)("div",{className:"text-xs text-red-600/70 dark:text-red-400/70 mt-1",children:"Money going out"})]})]})]}),(0,s.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r py-3 px-4 border-b ".concat(ee.netBalance>0?"from-green-50 to-zinc-50 dark:from-green-950/30 dark:to-zinc-950 border-green-100 dark:border-green-900/50":ee.netBalance<0?"from-red-50 to-zinc-50 dark:from-red-950/30 dark:to-zinc-950 border-red-100 dark:border-red-900/50":"from-zinc-100 to-zinc-50 dark:from-zinc-900 dark:to-zinc-950 border-zinc-200 dark:border-zinc-700"),children:(0,s.jsx)("h3",{className:"text-sm font-medium ".concat(ee.netBalance>0?"text-green-600 dark:text-green-400":ee.netBalance<0?"text-red-600 dark:text-red-400":"text-zinc-500 dark:text-zinc-400"),children:"Net Balance"})}),(0,s.jsxs)(g,{className:"p-4 flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(ee.netBalance>0?"bg-green-100 dark:bg-green-900/30":ee.netBalance<0?"bg-red-100 dark:bg-red-900/30":"bg-zinc-100 dark:bg-zinc-800"),children:(0,s.jsx)(eH.A,{className:"h-5 w-5 ".concat(ee.netBalance>0?"text-green-600 dark:text-green-400":ee.netBalance<0?"text-red-600 dark:text-red-400":"text-zinc-500")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold ".concat(ee.netBalance>0?"text-green-600 dark:text-green-400":ee.netBalance<0?"text-red-600 dark:text-red-400":""),children:c(ee.netBalance)}),(0,s.jsx)("div",{className:"text-xs mt-1 ".concat(ee.netBalance>0?"text-green-600/70 dark:text-green-400/70":ee.netBalance<0?"text-red-600/70 dark:text-red-400/70":"text-zinc-500 dark:text-zinc-400"),children:ee.netBalance>0?"Net positive balance":ee.netBalance<0?"Net negative balance":"Balanced"})]})]})]})]})]}),(0,s.jsx)(eD,{people:a,filters:A,setFilters:S,sorting:P,setSorting:V,overdueCount:ee.overdueCount}),$.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:$.map(e=>{let t=a.find(t=>t.id===e.personId),r="given"===e.status||"payed back"===e.status,n="payed back"===e.status||"returned"===e.status,d=!n&&e.expectedReturnDate&&u(e.expectedReturnDate);return(0,s.jsxs)(f,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300 ".concat(n?"opacity-75":""),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-zinc-50 to-zinc-100 dark:from-zinc-900 dark:to-zinc-950 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"text-base font-semibold",children:(null==t?void 0:t.name)||"Unknown Person"}),d&&(0,s.jsx)(eE,{children:(0,s.jsxs)(eP,{children:[(0,s.jsx)(eB,{asChild:!0,children:(0,s.jsx)(ep.A,{className:"h-4 w-4 text-red-500 animate-pulse"})}),(0,s.jsx)(eJ,{className:"bg-red-50 text-red-700 border border-red-200 dark:bg-red-950 dark:text-red-300 dark:border-red-800",children:(0,s.jsxs)("p",{className:"flex items-center gap-1 text-xs",children:[(0,s.jsx)(eZ.A,{className:"h-3 w-3"}),"Payment Overdue"]})})]})})]}),(0,s.jsx)(j,{variant:n?"outline":"default",className:"px-2 py-0.5 text-xs ".concat(n?r?"border-green-300 text-green-700 dark:border-green-700 dark:text-green-400":"border-red-300 text-red-700 dark:border-red-700 dark:text-red-400":r?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:r?"given"===e.status?"They Owe You":"Paid Back":"borrowed"===e.status?"You Owe Them":"Returned"})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"flex items-baseline gap-2",children:(0,s.jsx)("span",{className:"text-xl font-bold",children:c(e.amount)})}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>Q(e.id),children:n?(0,s.jsx)(B.A,{className:"h-3.5 w-3.5"}):(0,s.jsx)(ea.A,{className:"h-3.5 w-3.5"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>X(e),children:(0,s.jsx)(N.A,{className:"h-3.5 w-3.5"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-red-100 dark:hover:bg-red-900 hover:text-red-600",onClick:()=>K(e.id),children:(0,s.jsx)(w.A,{className:"h-3.5 w-3.5"})})]})]}),e.description&&(0,s.jsx)("div",{className:"rounded py-1.5 mb-2 border-zinc-100 dark:border-zinc-800 text-sm text-zinc-600 dark:text-zinc-300",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap text-xs gap-x-4 mt-1 text-zinc-500 dark:text-zinc-400",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ez.A,{className:"h-3 w-3 mr-1"}),(0,s.jsx)("span",{children:m(e.date)})]}),e.expectedReturnDate&&(0,s.jsxs)("div",{className:"flex items-center ".concat(d?"text-red-500":""),children:[(0,s.jsx)(eZ.A,{className:"h-3 w-3 mr-1"}),(0,s.jsxs)("span",{children:["Due: ",m(e.expectedReturnDate)]}),d&&(0,s.jsx)("span",{className:"ml-1",children:"(Overdue)"})]})]})]})]},e.id)})}):(0,s.jsxs)("div",{className:"text-center py-8 px-4 text-muted-foreground bg-zinc-50 dark:bg-zinc-950 rounded-lg border border-zinc-100 dark:border-zinc-800",children:[(0,s.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-3",children:(0,s.jsx)(k.A,{className:"h-6 w-6 text-zinc-400"})}),(0,s.jsx)("p",{className:"text-base mb-1",children:0===n.length?"No transactions added yet":"No transactions match your filters"}),(0,s.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:0===n.length?"Add a transaction to get started tracking debts":"Try adjusting your filter criteria"})]})]})});eG.displayName="DebtManager";var eq=a(841),eK=a(810),eQ=a(1071),eW=a(1003),eX=a(2793),e$=a(6633),e0=a(6190);let e5=e$.bL,e4=e$.l9;e$.YJ,e$.ZL,e$.Pb,e$.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...d}=e;return(0,s.jsxs)(e$.ZP,{ref:t,className:o("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...d,children:[n,(0,s.jsx)(ey.A,{className:"ml-auto"})]})}).displayName=e$.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e$.G5,{ref:t,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=e$.G5.displayName;let e1=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(e$.ZL,{children:(0,s.jsx)(e$.UC,{ref:t,sideOffset:r,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});e1.displayName=e$.UC.displayName;let e2=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(e$.q7,{ref:t,className:o("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});e2.displayName=e$.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...d}=e;return(0,s.jsxs)(e$.H_,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(e$.VF,{children:(0,s.jsx)(ea.A,{className:"h-4 w-4"})})}),r]})}).displayName=e$.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(e$.hN,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(e$.VF,{children:(0,s.jsx)(e0.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=e$.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(e$.JU,{ref:t,className:o("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})}).displayName=e$.JU.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e$.wv,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=e$.wv.displayName;var e3=a(7920),e6=a(5603);let e9=(0,a(1450).Wp)({apiKey:"AIzaSyBetEjUuFZsCmLXSq10pndvSo5g_lscNHU",authDomain:"debtly-95799.firebaseapp.com",projectId:"debtly-95799",storageBucket:"debtly-95799.firebasestorage.app",messagingSenderId:"164662497880",appId:"1:164662497880:web:1e6718da80df154505702d"}),e8=(0,e6.xI)(e9),e7=new e6.HF,te=(0,e3.aU)(e9);function tt(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[d,i]=(0,r.useState)("debts"),[l,o]=(0,r.useState)(null),[c,m]=(0,r.useState)(!0),u=(0,r.useRef)(null),[x,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=e8.onAuthStateChanged(async e=>{if(o(e),m(!1),e){let a=(0,e3.H9)(te,"users",e.uid);(await (0,e3.x7)(a)).exists()||await (0,e3.BN)(a,{people:[],debts:[]});let s=(0,e3.aQ)(a,e=>{let a=e.data();a&&(t(e=>JSON.stringify(e)!==JSON.stringify(a.people)?a.people:e),n(e=>JSON.stringify(e)!==JSON.stringify(a.debts)?a.debts:e),localStorage.setItem("people",JSON.stringify(a.people)),localStorage.setItem("debts",JSON.stringify(a.debts)))});return()=>s()}});return()=>e()},[]);let f=async()=>{try{await (0,e6.df)(e8,e7)}catch(e){eX.oR.error("Login failed",{description:e instanceof Error?e.message:"Unknown error"})}},g=async()=>{try{await (0,e6.CI)(e8)}catch(e){eX.oR.error("Logout failed")}};(0,r.useEffect)(()=>{if(!l)return;let t=async()=>{try{await (0,e3.mZ)((0,e3.H9)(te,"users",l.uid),{people:e})}catch(e){eX.oR.error("Failed to save people data")}},a=JSON.parse(localStorage.getItem("people")||"[]");JSON.stringify(e)!==JSON.stringify(a)&&t()},[e,l]),(0,r.useEffect)(()=>{if(!l)return;let e=async()=>{try{await (0,e3.mZ)((0,e3.H9)(te,"users",l.uid),{debts:a})}catch(e){eX.oR.error("Failed to save debts data")}},t=JSON.parse(localStorage.getItem("debts")||"[]");JSON.stringify(a)!==JSON.stringify(t)&&e()},[a,l]),(0,r.useEffect)(()=>{let e=localStorage.getItem("people"),a=localStorage.getItem("debts");e&&t(JSON.parse(e)),a&&n(JSON.parse(a))},[]),(0,r.useEffect)(()=>{localStorage.setItem("people",JSON.stringify(e)),localStorage.setItem("debts",JSON.stringify(a))},[e,a]);let b=t=>{let s=new Date,r=s.toISOString().split("T")[0],n=s.toTimeString().split(" ")[0].replace(/:/g,"-");if("json"===t){let t=new Blob([JSON.stringify({people:e,debts:a},null,2)],{type:"application/json"}),s=URL.createObjectURL(t),d=document.createElement("a");d.href=s,d.download="debt-tracker-data-".concat(r,"_").concat(n,".json"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(s)}else if("csv"===t){let t=new Blob([["\uFEFFID,Person,Amount,Description,Date,ExpectedReturnDate,Status",...a.map(t=>{var a;let s=e.find(e=>e.id===t.personId);return[t.id,'"'.concat((null==s?void 0:s.name)||"Unknown",'"'),t.amount,'"'.concat(t.description,'"'),t.date,null!==(a=t.expectedReturnDate)&&void 0!==a?a:"",t.status]}).map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(t),d=document.createElement("a");d.href=s,d.download="debt-tracker-data-".concat(r,"_").concat(n,".csv"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(s)}},j=e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s)return;let r=new FileReader;r.onload=e=>{try{var a;let s=null===(a=e.target)||void 0===a?void 0:a.result,r=JSON.parse(s);r.people&&Array.isArray(r.people)&&t(r.people),r.debts&&Array.isArray(r.debts)&&n(r.debts),(0,eX.oR)("Data imported successfully!")}catch(e){eX.oR.error("Failed to import data!",{description:"Please make sure the file is valid JSON."})}},r.readAsText(s),e.target.value=""};return c?(0,s.jsx)("div",{children:"Loading..."}):l?(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsxs)("div",{className:"flex justify-between border-b border-zinc-200 dark:border-zinc-800 pb-6 flex-col sm:flex-row items-start sm:items-end gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-zinc-600 to-zinc-600 dark:from-zinc-400 dark:to-zinc-400 bg-clip-text text-transparent flex items-center justify-between gap-2",children:["Debtly",(0,s.jsxs)("div",{className:"flex gap-3 items-center ml-4",children:[(0,s.jsxs)("span",{className:"text-base font-medium text-zinc-700 dark:text-zinc-300",children:["Hi, ",l.displayName]}),(0,s.jsx)(h,{size:"icon",variant:"ghost",onClick:g,className:"flex items-center justify-center h-8 w-8 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,s.jsx)(eq.A,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-400"})})]})]}),(0,s.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:"Keep track of money you owe and money owed to you"})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,s.jsxs)(h,{variant:"outline",onClick:()=>b("json"),className:"flex items-center gap-2 bg-white/80 dark:bg-zinc-900/80 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-800 border-zinc-200 dark:border-zinc-800 transition-all",children:[(0,s.jsx)(eK.A,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-400"}),"Export JSON"]}),(0,s.jsxs)(h,{variant:"outline",onClick:()=>b("csv"),className:"flex items-center gap-2 bg-white/80 dark:bg-zinc-900/80 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-800 border-zinc-200 dark:border-zinc-800 transition-all",children:[(0,s.jsx)(eK.A,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-400"}),"Export CSV"]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)(h,{variant:"outline",className:"flex items-center gap-2 bg-white/80 dark:bg-zinc-900/80 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-800 border-zinc-200 dark:border-zinc-800 transition-all",children:[(0,s.jsx)("input",{type:"file",accept:".json",id:"import-json",className:"absolute inset-0 opacity-0 w-full cursor-pointer",onChange:j}),(0,s.jsx)(eQ.A,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-400"}),"Import JSON"]})})]}),(0,s.jsxs)(e5,{open:x,onOpenChange:p,children:[(0,s.jsx)(e4,{asChild:!0,className:"md:hidden self-end",children:(0,s.jsxs)(h,{variant:"outline",size:"sm",className:"bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 shadow-sm",children:[(0,s.jsx)(eW.A,{className:"h-4 w-4 mr-2 text-zinc-600 dark:text-zinc-400"}),"Options"]})}),(0,s.jsxs)(e1,{align:"end",className:"w-48 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-lg rounded-lg",children:[(0,s.jsxs)(e2,{onClick:()=>b("json"),className:"hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer",children:[(0,s.jsx)(eK.A,{className:"h-4 w-4 mr-2 text-zinc-600 dark:text-zinc-400"}),"Export JSON"]}),(0,s.jsxs)(e2,{onClick:()=>b("csv"),className:"hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer",children:[(0,s.jsx)(eK.A,{className:"h-4 w-4 mr-2 text-zinc-600 dark:text-zinc-400"}),"Export CSV"]}),(0,s.jsxs)(e2,{onSelect:e=>e.preventDefault(),className:"hover:bg-zinc-50 dark:hover:bg-zinc-800 cursor-pointer relative",children:[(0,s.jsxs)("label",{htmlFor:"mobile-import-json",className:"flex items-center cursor-pointer w-full",children:[(0,s.jsx)(eQ.A,{className:"h-4 w-4 mr-2 text-zinc-600 dark:text-zinc-400"}),"Import JSON"]}),(0,s.jsx)("input",{type:"file",accept:".json",id:"mobile-import-json",className:"absolute inset-0 opacity-0 w-full h-full cursor-pointer",onChange:e=>{j(e),p(!1)}})]})]})]})]}),(0,s.jsx)("div",{className:"rounded-xl",children:(0,s.jsxs)(eO,{value:d,onValueChange:i,className:"w-full",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsxs)(eI,{className:"grid w-52 grid-cols-2 rounded-lg bg-zinc-100 dark:bg-zinc-900",children:[(0,s.jsxs)(eF,{value:"debts",className:"rounded-md font-medium",children:[(0,s.jsx)(k.A,{className:"h-4 w-4"}),"Transactions"]}),(0,s.jsxs)(eF,{value:"people",className:"rounded-md font-medium",children:[(0,s.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"People"]})]})}),(0,s.jsx)(eT,{value:"debts",className:"mt-2 focus-visible:outline-none focus-visible:ring-0",children:(0,s.jsx)(eG,{ref:u,people:e,debts:a,setDebts:n})}),(0,s.jsx)(eT,{value:"people",className:"mt-2 focus-visible:outline-none focus-visible:ring-0",children:(0,s.jsx)(X,{people:e,setPeople:t,debts:a,onAddDebt:(e,t)=>{i("debts"),setTimeout(()=>{u.current&&u.current.initFormForPerson(e,t)},0)}})})]})})]})}):(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Debtify"}),(0,s.jsx)(h,{onClick:f,children:"Sign in with Google"})]})}var ta=a(3041);function ts(e){let{children:t,...a}=e;return(0,s.jsx)(ta.N,{...a,children:t})}function tr(){return(0,s.jsx)(ts,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:(0,s.jsx)("main",{className:"min-h-screen p-4 md:p-8",children:(0,s.jsx)(tt,{})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[100,243,656,142,767,358],()=>t(1431)),_N_E=e.O()}]);